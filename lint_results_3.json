[{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\app\\analysis\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\app\\leads\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used.","line":45,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedLeadId' is assigned a value but never used.","line":51,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isReservationOpen' is assigned a value but never used.","line":52,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Search, ChevronRight, MessageCircle, Edit, CalendarDays, Copy, Check, Sparkles, Pin, Clock, Archive, Plus, User } from \"lucide-react\"\r\nimport { supabase } from \"@/lib/supabase\"\r\nimport { cn } from \"@/lib/utils\"\r\n// UI Components\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from \"@/components/ui/collapsible\"\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogFooter, DialogClose } from \"@/components/ui/dialog\"\r\nimport { Calendar } from \"@/components/ui/calendar\"\r\nimport { tr } from \"date-fns/locale\"\r\nimport { JsonImportDialog } from \"@/components/JsonImportDialog\"\r\n\r\n// Database Type\r\ninterface Lead {\r\n    id: string\r\n    name: string\r\n    phone: string | null\r\n    source: string | null\r\n    process_name: string | null\r\n    status: string | null\r\n    created_at: string\r\n    price: number | null\r\n    ai_summary: string | null\r\n    reservation_at: string | null\r\n}\r\n\r\n// Category Configuration\r\nconst CATEGORIES = {\r\n    'Yeni': { color: 'text-green-500', bg: 'bg-green-500/10', border: 'border-green-500/20', icon: Sparkles },\r\n    'Sabit': { color: 'text-orange-500', bg: 'bg-orange-500/10', border: 'border-orange-500/20', icon: Pin },\r\n    'Takip': { color: 'text-cyan-500', bg: 'bg-cyan-500/10', border: 'border-cyan-500/20', icon: Clock },\r\n    'Arşiv': { color: 'text-slate-500', bg: 'bg-slate-500/10', border: 'border-slate-500/20', icon: Archive },\r\n} as const\r\n\r\ntype CategoryType = keyof typeof CATEGORIES\r\n\r\nconst ORDERED_CATEGORIES: CategoryType[] = ['Yeni', 'Sabit', 'Takip', 'Arşiv']\r\n\r\nexport default function LeadsPage() {\r\n    const [leads, setLeads] = useState<Lead[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [search, setSearch] = useState('')\r\n\r\n    // UI State\r\n    const [copiedText, setCopiedText] = useState<string | null>(null)\r\n    const [reservationDate, setReservationDate] = useState<Date | undefined>(new Date())\r\n    const [selectedLeadId, setSelectedLeadId] = useState<string | null>(null)\r\n    const [isReservationOpen, setIsReservationOpen] = useState(false)\r\n\r\n    // Expanded states for categories\r\n    const [expanded, setExpanded] = useState<Record<string, boolean>>({\r\n        'Yeni': true,\r\n        'Sabit': true,\r\n        'Takip': true,\r\n        'Arşiv': false // Archive closed by default\r\n    })\r\n\r\n    const fetchLeads = async () => {\r\n        setLoading(true)\r\n\r\n        // Supabase Check\r\n        if (!('auth' in supabase)) {\r\n            console.warn(\"Supabase not configured, using mock data\")\r\n            setLeads([\r\n                {\r\n                    id: '1', name: 'Ahmet Yılmaz', phone: '5551234567', source: 'Instagram',\r\n                    process_name: 'Bağlama', status: 'Yeni', created_at: new Date().toISOString(),\r\n                    price: 5000, ai_summary: 'Eşiyle sorun yaşıyor, acil işlem istiyor.', reservation_at: null\r\n                },\r\n                {\r\n                    id: '3', name: 'Mehmet Kaya', phone: '5331112233', source: 'Web',\r\n                    process_name: 'Rızık', status: 'Arşiv', created_at: new Date().toISOString(),\r\n                    price: 3000, ai_summary: 'İş yeri bereketi için.', reservation_at: null\r\n                }\r\n            ])\r\n            setLoading(false)\r\n            return\r\n        }\r\n\r\n        const { data, error } = await supabase\r\n            .from('leads')\r\n            .select('*')\r\n            .neq('status', 'Rezervasyon') // Exclude reservations\r\n            .order('created_at', { ascending: false })\r\n\r\n        if (error) {\r\n            console.error('Error fetching leads:', error)\r\n            setLoading(false)\r\n            return\r\n        }\r\n\r\n        setLeads(data || [])\r\n        setLoading(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchLeads()\r\n    }, [])\r\n\r\n    const toggleCategory = (cat: string) => {\r\n        setExpanded(prev => ({ ...prev, [cat]: !prev[cat] }))\r\n    }\r\n\r\n    const handleCopy = (text: string) => {\r\n        navigator.clipboard.writeText(text)\r\n        setCopiedText(text)\r\n        setTimeout(() => setCopiedText(null), 2000)\r\n    }\r\n\r\n    const handleWhatsApp = (phone: string | null) => {\r\n        if (!phone) return\r\n        const cleanPhone = phone.replace(/\\D/g, '')\r\n        const finalPhone = cleanPhone.startsWith('90') ? cleanPhone : `90${cleanPhone}`\r\n        window.open(`https://web.whatsapp.com/send?phone=${finalPhone}`, '_blank')\r\n    }\r\n\r\n    const handleReservation = async (leadId: string, date: Date | undefined) => {\r\n        if (!date) return\r\n\r\n        try {\r\n            // 1. Update DB: Set date AND change status to 'Rezervasyon'\r\n            const { error } = await supabase\r\n                .from('leads')\r\n                .update({\r\n                    reservation_at: date.toISOString(),\r\n                    status: 'Rezervasyon'\r\n                })\r\n                .eq('id', leadId)\r\n\r\n            if (error) throw error\r\n\r\n            // 2. Remove from local state (optimistic update)\r\n            setLeads(prev => prev.filter(l => l.id !== leadId))\r\n\r\n            // Close popover\r\n            setIsReservationOpen(false)\r\n            setSelectedLeadId(null)\r\n        } catch (error) {\r\n            console.error('Error creating reservation:', error)\r\n        }\r\n    }\r\n\r\n    // Change Status\r\n    const updateStatus = async (id: string, newStatus: string) => {\r\n        // Optimistic UI Update\r\n        const updatedLeads = leads.map(l => l.id === id ? { ...l, status: newStatus } : l)\r\n        setLeads(updatedLeads)\r\n\r\n        if ('auth' in supabase) {\r\n            await supabase.from('leads').update({ status: newStatus }).eq('id', id)\r\n        }\r\n    }\r\n\r\n    // Filter Logic\r\n    const filteredLeads = leads.filter(lead =>\r\n        lead.name.toLowerCase().includes(search.toLowerCase()) ||\r\n        (lead.phone && lead.phone.includes(search)) ||\r\n        (lead.process_name && lead.process_name.toLowerCase().includes(search.toLowerCase()))\r\n    )\r\n\r\n    return (\r\n        <div className=\"p-8 max-w-[1600px] mx-auto space-y-8\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-slate-800 pb-6\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent\">\r\n                        Kayıtlar\r\n                    </h1>\r\n                    <p className=\"text-slate-400 mt-2\">\r\n                        Müşteri takibi ve yönetimi.\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4 w-full md:w-auto\">\r\n                    <div className=\"relative flex-1 md:w-[300px]\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500\" size={18} />\r\n                        <Input\r\n                            placeholder=\"İsim, telefon veya işlem ara...\"\r\n                            className=\"pl-10 bg-slate-900/50 border-slate-700 text-slate-100 placeholder:text-slate-500\"\r\n                            value={search}\r\n                            onChange={(e) => setSearch(e.target.value)}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <JsonImportDialog onSuccess={fetchLeads} />\r\n                        <Button className=\"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white gap-2 shadow-lg shadow-purple-900/20 transition-all duration-300 hover:scale-[1.02]\">\r\n                            <Plus size={18} />\r\n                            Yeni Kayıt\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* List Layout - Grouped by Category */}\r\n            <div className=\"space-y-6\">\r\n                {ORDERED_CATEGORIES.map(category => {\r\n                    const categoryItems = filteredLeads.filter(l => (l.status || 'Yeni') === category)\r\n                    const config = CATEGORIES[category]\r\n                    const isOpen = expanded[category]\r\n\r\n                    return (\r\n                        <Collapsible\r\n                            key={category}\r\n                            open={isOpen}\r\n                            onOpenChange={() => toggleCategory(category)}\r\n                            className={cn(\r\n                                \"rounded-xl border transition-all duration-200\",\r\n                                isOpen ? \"bg-slate-900/40 border-slate-800\" : \"bg-transparent border-transparent hover:bg-slate-900/20\"\r\n                            )}\r\n                        >\r\n                            <CollapsibleTrigger asChild>\r\n                                <div className=\"flex items-center gap-3 p-4 cursor-pointer group select-none\">\r\n                                    <ChevronRight className={cn(\"text-slate-500 transition-transform duration-200\", isOpen && \"rotate-90\")} />\r\n\r\n                                    <div className={cn(\"flex items-center gap-2 px-4 py-2.5 rounded-lg border\", config.bg, config.border)}>\r\n                                        <config.icon size={20} className={config.color} />\r\n                                        <span className={cn(\"font-bold text-lg\", config.color)}>{category}</span>\r\n                                        <span className={cn(\"text-sm opacity-70 ml-1\", config.color)}>({categoryItems.length})</span>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex-1 h-px bg-slate-800/50 ml-4 group-hover:bg-slate-800\" />\r\n                                </div>\r\n                            </CollapsibleTrigger>\r\n\r\n                            <CollapsibleContent>\r\n                                <div className=\"px-4 pb-4 space-y-1\">\r\n                                    {/* Header Row - Flex Layout */}\r\n                                    <div className=\"flex items-center gap-4 px-6 py-2 border-b border-slate-800/50 mb-3 text-sm font-black text-slate-400 uppercase tracking-wide\">\r\n                                        <div className=\"w-[180px] shrink-0\">İsim & Telefon</div>\r\n                                        <div className=\"w-[160px] shrink-0\">İşlem & Ücret</div>\r\n                                        <div className=\"w-[150px] shrink-0\">Durum</div>\r\n                                        <div className=\"flex-1 pl-2\">Detay (AI)</div>\r\n                                    </div>\r\n\r\n                                    {categoryItems.length === 0 ? (\r\n                                        <div className=\"p-8 text-center text-slate-600 italic text-sm font-medium\">Bu kategoride kayıt yok.</div>\r\n                                    ) : (\r\n                                        categoryItems.map(lead => (\r\n                                            <div\r\n                                                key={lead.id}\r\n                                                className=\"flex items-center gap-4 px-6 py-2 rounded-lg hover:bg-slate-800/60 transition-all duration-200 hover:scale-[1.01] hover:shadow-md border border-transparent hover:border-slate-800/50 group bg-slate-900/20\"\r\n                                            >\r\n                                                {/* Name & Phone */}\r\n                                                <div className=\"w-[180px] shrink-0 flex flex-col justify-center gap-0.5\">\r\n                                                    <div className=\"text-[13px] font-bold text-slate-200 truncate leading-tight\">{lead.name}</div>\r\n                                                    <div className=\"text-[11px] font-semibold text-slate-500/90 truncate font-sans\">{lead.phone || '-'}</div>\r\n                                                </div>\r\n\r\n                                                {/* Process & Price */}\r\n                                                <div className=\"w-[160px] shrink-0 flex flex-col justify-center gap-1\">\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <div className={cn(\"w-2 h-2 rounded-full shrink-0 shadow-[0_0_8px]\",\r\n                                                            lead.process_name?.includes('Bağlama') ? \"bg-purple-500 shadow-purple-500/50\" :\r\n                                                                lead.process_name?.includes('Geri') ? \"bg-cyan-500 shadow-cyan-500/50\" :\r\n                                                                    lead.process_name?.includes('Büyü') ? \"bg-red-500 shadow-red-500/50\" :\r\n                                                                        lead.process_name?.includes('Rızık') ? \"bg-amber-500 shadow-amber-500/50\" :\r\n                                                                            \"bg-slate-500 shadow-slate-500/50\"\r\n                                                        )} />\r\n                                                        <span className=\"text-[12px] font-bold text-slate-300 truncate opacity-90\">{lead.process_name || 'İşlem Yok'}</span>\r\n                                                    </div>\r\n                                                    <div className=\"text-[11px] font-bold text-slate-500 pl-4 opacity-80\">\r\n                                                        {lead.price ? `${lead.price.toLocaleString('tr-TR')} ₺` : '-'}\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Status Selector */}\r\n                                                <div className=\"w-[150px] shrink-0\">\r\n                                                    <Popover>\r\n                                                        <PopoverTrigger asChild>\r\n                                                            <button className={cn(\"text-[10px] font-black px-2.5 py-1 rounded-md border border-slate-800/50 hover:border-slate-700 hover:bg-slate-800 transition-all flex w-fit items-center gap-2 shadow-sm\", config.color, config.bg)}>\r\n                                                                <div className={cn(\"w-1.5 h-1.5 rounded-full\", config.bg.replace('/10', ''))} />\r\n                                                                {lead.status}\r\n                                                            </button>\r\n                                                        </PopoverTrigger>\r\n                                                        <PopoverContent className=\"w-48 p-1 bg-[#0F111A] border-slate-800 shadow-xl rounded-lg\">\r\n                                                            {ORDERED_CATEGORIES.map(cat => (\r\n                                                                <button\r\n                                                                    key={cat}\r\n                                                                    onClick={() => updateStatus(lead.id, cat)}\r\n                                                                    className={cn(\r\n                                                                        \"w-full text-left px-3 py-2.5 text-xs rounded-md hover:bg-slate-800 flex items-center gap-2.5 transition-colors\",\r\n                                                                        cat === lead.status ? \"text-white bg-slate-800/80 font-bold\" : \"text-slate-400 font-semibold\"\r\n                                                                    )}\r\n                                                                >\r\n                                                                    <div className={cn(\"w-2 h-2 rounded-full\", CATEGORIES[cat].bg.replace('/10', ''))} />\r\n                                                                    {cat}\r\n                                                                </button>\r\n                                                            ))}\r\n                                                        </PopoverContent>\r\n                                                    </Popover>\r\n                                                </div>\r\n\r\n                                                {/* AI Summary (Detail) & Actions */}\r\n                                                <div className=\"flex-1 min-w-0 flex items-center gap-6 pl-2\">\r\n                                                    <Dialog>\r\n                                                        <DialogTrigger asChild>\r\n                                                            <button className=\"text-[10px] font-semibold text-slate-500/80 hover:text-slate-300 transition-colors text-left truncate w-[260px] opacity-90 cursor-pointer\">\r\n                                                                {lead.ai_summary || 'Detay yok...'}\r\n                                                            </button>\r\n                                                        </DialogTrigger>\r\n                                                        <DialogContent className=\"bg-slate-950 border-slate-800\">\r\n                                                            <DialogHeader>\r\n                                                                <DialogTitle className=\"text-slate-100 flex items-center gap-2\">\r\n                                                                    <User size={18} className=\"text-slate-400\" />\r\n                                                                    {lead.name} - Detaylar\r\n                                                                </DialogTitle>\r\n                                                            </DialogHeader>\r\n                                                            <div className=\"mt-4 p-4 bg-slate-900/50 rounded-lg border border-slate-800 text-slate-300 text-sm leading-relaxed max-h-[60vh] overflow-y-auto\">\r\n                                                                {lead.ai_summary || \"Herhangi bir detay bulunamadı.\"}\r\n                                                            </div>\r\n                                                            <DialogFooter className=\"sm:justify-between gap-2 mt-4\">\r\n                                                                <Button\r\n                                                                    variant=\"outline\"\r\n                                                                    size=\"sm\"\r\n                                                                    onClick={() => handleCopy(lead.ai_summary || \"\")}\r\n                                                                    className=\"gap-2 border-slate-700 hover:bg-slate-800 hover:text-white\"\r\n                                                                >\r\n                                                                    {copiedText === lead.ai_summary ? <Check size={14} className=\"text-green-500\" /> : <Copy size={14} />}\r\n                                                                    {copiedText === lead.ai_summary ? \"Kopyalandı\" : \"Kopyala\"}\r\n                                                                </Button>\r\n                                                                <DialogClose asChild>\r\n                                                                    <Button variant=\"ghost\" size=\"sm\" className=\"text-slate-500 hover:text-white\">Kapat</Button>\r\n                                                                </DialogClose>\r\n                                                            </DialogFooter>\r\n                                                        </DialogContent>\r\n                                                    </Dialog>\r\n\r\n                                                    {/* Actions - Persistent & Scaled */}\r\n                                                    <div className=\"flex gap-2 shrink-0 ml-auto\">\r\n                                                        <Popover>\r\n                                                            <PopoverTrigger asChild>\r\n                                                                <Button variant=\"ghost\" size=\"icon\" className=\"h-11 w-11 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded-xl transition-all hover:scale-110\" title=\"Randevu Oluştur\">\r\n                                                                    <CalendarDays size={22} />\r\n                                                                </Button>\r\n                                                            </PopoverTrigger>\r\n                                                            <PopoverContent className=\"w-auto p-0 bg-slate-950 border-slate-800\" align=\"end\">\r\n                                                                <Calendar\r\n                                                                    mode=\"single\"\r\n                                                                    selected={reservationDate}\r\n                                                                    onSelect={(date) => {\r\n                                                                        setReservationDate(date)\r\n                                                                        if (date) handleReservation(lead.id, date)\r\n                                                                    }}\r\n                                                                    locale={tr}\r\n                                                                    disabled={(date) => date < new Date(new Date().setHours(0, 0, 0, 0))}\r\n                                                                    initialFocus\r\n                                                                    className=\"p-3\"\r\n                                                                />\r\n                                                            </PopoverContent>\r\n                                                        </Popover>\r\n\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"icon\"\r\n                                                            onClick={() => handleWhatsApp(lead.phone)}\r\n                                                            className=\"h-11 w-11 text-green-400 hover:text-green-300 hover:bg-green-500/10 rounded-xl transition-all hover:scale-110\"\r\n                                                            title=\"WhatsApp Web\"\r\n                                                        >\r\n                                                            <MessageCircle size={22} />\r\n                                                        </Button>\r\n                                                        <Button variant=\"ghost\" size=\"icon\" className=\"h-11 w-11 text-orange-400 hover:text-orange-300 hover:bg-orange-500/10 rounded-xl transition-all hover:scale-110\" title=\"Düzenle\">\r\n                                                            <Edit size={22} />\r\n                                                        </Button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))\r\n                                    )}\r\n                                </div>\r\n                            </CollapsibleContent>\r\n                        </Collapsible>\r\n                    )\r\n                })}\r\n            </div >\r\n        </div >\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used.","line":24,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { CalendarCheck, Calendar, CalendarDays, CalendarRange, CalendarX, User, Phone } from 'lucide-react'\r\nimport { KPICard } from '@/components/KPICard'\r\nimport { supabase } from '@/lib/supabase'\r\nimport { format, isSameDay, isThisWeek, isThisMonth, parseISO, startOfDay, isAfter } from 'date-fns'\r\nimport { tr } from 'date-fns/locale'\r\nimport { cn } from '@/lib/utils'\r\n\r\ninterface Lead {\r\n  id: string\r\n  name: string\r\n  phone?: string\r\n  status: string\r\n  reservation_at?: string\r\n  price?: number\r\n  process_name?: string\r\n}\r\n\r\nexport default function DashboardPage() {\r\n  const [leads, setLeads] = useState<Lead[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    fetchReservations()\r\n  }, [])\r\n\r\n  const fetchReservations = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('leads')\r\n        .select('*')\r\n        .eq('status', 'Rezervasyon')\r\n        .not('reservation_at', 'is', null) // Ensure date exists\r\n        .order('reservation_at', { ascending: true })\r\n\r\n      if (error) throw error\r\n      setLeads(data || [])\r\n    } catch (error) {\r\n      console.error('Error fetching reservations:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  // Filter Stats\r\n  const now = new Date()\r\n  const upcomingLeads = leads.filter(l => {\r\n    if (!l.reservation_at) return false\r\n    return isAfter(parseISO(l.reservation_at), startOfDay(now)) || isSameDay(parseISO(l.reservation_at), now)\r\n  })\r\n\r\n  const STATS = {\r\n    total: leads.length,\r\n    today: leads.filter(l => l.reservation_at && isSameDay(parseISO(l.reservation_at), now)).length,\r\n    week: leads.filter(l => l.reservation_at && isThisWeek(parseISO(l.reservation_at), { weekStartsOn: 1 })).length,\r\n    month: leads.filter(l => l.reservation_at && isThisMonth(parseISO(l.reservation_at))).length\r\n  }\r\n\r\n  // Group by Date for UI\r\n  const groupedReservations = upcomingLeads.reduce((groups, lead) => {\r\n    const date = format(parseISO(lead.reservation_at!), 'yyyy-MM-dd')\r\n    if (!groups[date]) groups[date] = []\r\n    groups[date].push(lead)\r\n    return groups\r\n  }, {} as Record<string, Lead[]>)\r\n\r\n  // Sort dates\r\n  const sortedDates = Object.keys(groupedReservations).sort((a, b) => a.localeCompare(b))\r\n\r\n  return (\r\n    <div className=\"p-8 max-w-7xl mx-auto space-y-8\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center gap-3\">\r\n        <div className=\"p-3 bg-purple-500/10 rounded-xl border border-purple-500/20\">\r\n          <CalendarCheck className=\"text-purple-400\" size={32} />\r\n        </div>\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-white tracking-tight\">Yaklaşan Rezervasyonlar</h1>\r\n          <p className=\"text-slate-400\">Takvim ve rezervasyon takibi</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* KPI Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <KPICard\r\n          title=\"Toplam Kayıt\"\r\n          value={STATS.total.toString()}\r\n          icon={CalendarCheck}\r\n          colorClass=\"text-purple-400\"\r\n          bgClass=\"bg-purple-500/15\"\r\n          borderClass=\"border-purple-500/30\"\r\n        />\r\n        <KPICard\r\n          title=\"Bugün\"\r\n          value={STATS.today.toString()}\r\n          icon={Calendar}\r\n          colorClass=\"text-green-400\"\r\n          bgClass=\"bg-green-500/15\"\r\n          borderClass=\"border-green-500/30\"\r\n        />\r\n        <KPICard\r\n          title=\"Bu Hafta\"\r\n          value={STATS.week.toString()}\r\n          icon={CalendarDays}\r\n          colorClass=\"text-blue-400\"\r\n          bgClass=\"bg-blue-500/15\"\r\n          borderClass=\"border-blue-500/30\"\r\n        />\r\n        <KPICard\r\n          title=\"Bu Ay\"\r\n          value={STATS.month.toString()}\r\n          icon={CalendarRange}\r\n          colorClass=\"text-fuchsia-400\"\r\n          bgClass=\"bg-fuchsia-500/15\"\r\n          borderClass=\"border-fuchsia-500/30\"\r\n        />\r\n      </div>\r\n\r\n      {/* Content Area - Horizontal Scroll */}\r\n      {sortedDates.length === 0 ? (\r\n        <div className=\"bg-slate-900/40 border border-slate-800/50 rounded-2xl min-h-[400px] flex flex-col items-center justify-center text-center\">\r\n          <CalendarX size={64} className=\"text-slate-800 mb-6\" />\r\n          <p className=\"text-xl text-slate-400 font-medium\">Yaklaşan rezervasyon bulunmuyor</p>\r\n          <p className=\"text-sm text-slate-600 mt-2\">Kayıtlar ekranından yeni bir tarih belirleyebilirsiniz.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"overflow-x-auto pb-6\">\r\n          <div className=\"flex gap-6 min-w-max px-1\">\r\n            {sortedDates.map(dateStr => {\r\n              const items = groupedReservations[dateStr]\r\n              const dateObj = parseISO(dateStr)\r\n              const isToday = isSameDay(dateObj, now)\r\n\r\n              return (\r\n                <div\r\n                  key={dateStr}\r\n                  className={cn(\r\n                    \"w-[340px] shrink-0 rounded-2xl border flex flex-col overflow-hidden\",\r\n                    isToday\r\n                      ? \"bg-slate-900/80 border-purple-500/50 shadow-[0_0_30px_-10px_rgba(168,85,247,0.2)]\"\r\n                      : \"bg-slate-900/40 border-slate-800/50\"\r\n                  )}\r\n                >\r\n                  {/* Date Header */}\r\n                  <div className={cn(\r\n                    \"px-5 py-4 border-b flex items-center justify-between\",\r\n                    isToday ? \"bg-purple-500/10 border-purple-500/20\" : \"bg-slate-900/50 border-slate-800/50\"\r\n                  )}>\r\n                    <div>\r\n                      <div className={cn(\"text-lg font-bold\", isToday ? \"text-purple-300\" : \"text-slate-200\")}>\r\n                        {format(dateObj, 'd MMMM', { locale: tr })}\r\n                      </div>\r\n                      <div className={cn(\"text-xs font-medium uppercase tracking-wider\", isToday ? \"text-purple-400/70\" : \"text-slate-500\")}>\r\n                        {format(dateObj, 'EEEE', { locale: tr })}\r\n                      </div>\r\n                    </div>\r\n                    {isToday && (\r\n                      <span className=\"text-[10px] font-bold bg-purple-500 text-white px-2 py-0.5 rounded-full uppercase tracking-wider\">Bugün</span>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* List */}\r\n                  <div className=\"p-3 space-y-3 max-h-[500px] overflow-y-auto custom-scrollbar\">\r\n                    {items.map(lead => (\r\n                      <div key={lead.id} className=\"p-4 rounded-xl bg-slate-950/50 border border-slate-800/50 hover:border-slate-700/50 transition-colors group\">\r\n                        <div className=\"flex items-start justify-between mb-3\">\r\n                          <div>\r\n                            <div className=\"font-bold text-slate-200 text-base\">{lead.name}</div>\r\n                            <div className=\"flex items-center gap-1.5 text-xs text-slate-500 mt-0.5 font-medium\">\r\n                              <Phone size={12} />\r\n                              {lead.phone || '-'}\r\n                            </div>\r\n                          </div>\r\n                          {lead.price && (\r\n                            <div className=\"text-right\">\r\n                              <div className=\"text-sm font-bold text-slate-300 bg-slate-800/50 px-2 py-0.5 rounded-md font-mono\">\r\n                                {lead.price.toLocaleString('tr-TR')} ₺\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center justify-between pt-3 border-t border-slate-800/50\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <div className=\"p-1.5 bg-indigo-500/10 rounded-md\">\r\n                              <User size={14} className=\"text-indigo-400\" />\r\n                            </div>\r\n                            <span className=\"text-xs font-semibold text-slate-400\">\r\n                              {lead.process_name || 'İşlem Belirtilmemiş'}\r\n                            </span>\r\n                          </div>\r\n\r\n                          {lead.reservation_at && (\r\n                            <span className=\"text-xs font-bold text-slate-500 bg-slate-900 px-2 py-1 rounded\">\r\n                              {format(parseISO(lead.reservation_at), 'HH:mm')}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\app\\reminders\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\app\\reservations\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\app\\settings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Layout' is defined but never used.","line":4,"column":63,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":69,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Layout"},"fix":{"range":[110,118],"text":""},"desc":"Remove unused variable \"Layout\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Textarea' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":18,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Textarea"},"fix":{"range":[249,300],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Switch' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":16,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Switch"},"fix":{"range":[302,349],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsContent' is defined but never used.","line":17,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TabsContent"},"fix":{"range":[542,555],"text":""},"desc":"Remove unused variable \"TabsContent\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Alert' is defined but never used.","line":19,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Alert"},"fix":{"range":[674,680],"text":""},"desc":"Remove unused variable \"Alert\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDescription' is defined but never used.","line":19,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertDescription"},"fix":{"range":[679,697],"text":""},"desc":"Remove unused variable \"AlertDescription\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTitle' is defined but never used.","line":19,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":45,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"AlertTitle"},"fix":{"range":[665,740],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toast' is defined but never used.","line":22,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":15,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"toast"},"fix":{"range":[897,927],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoading' is assigned a value but never used.","line":26,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'apiKey' is assigned a value but never used.","line":30,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setApiKey' is assigned a value but never used.","line":30,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'model' is assigned a value but never used.","line":31,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setModel' is assigned a value but never used.","line":31,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'prompt' is assigned a value but never used.","line":32,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setPrompt' is assigned a value but never used.","line":32,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleSaveGlobal' is assigned a value but never used.","line":34,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":139,"column":102,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":105,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8100,8103],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8100,8103],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Settings, BrainCircuit, List, Save, Shield, Palette, Layout, RotateCcw } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { Switch } from \"@/components/ui/switch\"\r\nimport { Label } from \"@/components/ui/label\"\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\"\r\nimport { ProcessTypesSettings } from \"@/components/settings/ProcessTypesSettings\"\r\nimport { useSettings } from \"@/components/providers/settings-provider\"\r\nimport { toast } from \"sonner\" // Assuming sonner is installed, or valid alt. If not, fallback to alert.\r\n\r\nexport default function SettingsPage() {\r\n    const { config, updateConfig, resetToDefaults } = useSettings()\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [activeTab, setActiveTab] = useState(\"appearance\")\r\n\r\n    // Local state for AI (Mock)\r\n    const [apiKey, setApiKey] = useState(\"sk-or-...\")\r\n    const [model, setModel] = useState(\"openai/gpt-4o\")\r\n    const [prompt, setPrompt] = useState(\"\")\r\n\r\n    const handleSaveGlobal = async () => {\r\n        setIsLoading(true)\r\n        // Simulate delay\r\n        await new Promise(resolve => setTimeout(resolve, 800))\r\n        setIsLoading(false)\r\n        // Show success\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-8 max-w-[1600px] mx-auto\">\r\n            <div className=\"flex items-center gap-3 mb-8 border-b border-slate-800 pb-6\">\r\n                <div className=\"p-2 bg-purple-500/10 rounded-lg\">\r\n                    <Settings className=\"text-purple-400\" size={28} />\r\n                </div>\r\n                <h1 className=\"text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent\">\r\n                    Sistem Ayarları\r\n                </h1>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col lg:flex-row gap-8\">\r\n                {/* Left Sidebar Menu */}\r\n                <div className=\"w-full lg:w-64 flex-shrink-0\">\r\n                    <Tabs defaultValue=\"appearance\" orientation=\"vertical\" value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n                        <TabsList className=\"flex flex-col h-auto bg-transparent gap-2 p-0 w-full items-stretch\">\r\n                            <TabsTrigger\r\n                                value=\"appearance\"\r\n                                className=\"justify-start gap-3 px-4 py-3 data-[state=active]:bg-purple-500/10 data-[state=active]:text-purple-400 data-[state=active]:border-l-2 data-[state=active]:border-purple-500 rounded-none rounded-r-lg transition-all\"\r\n                            >\r\n                                <Palette size={18} />\r\n                                Görünüm & Kimlik\r\n                            </TabsTrigger>\r\n                            <TabsTrigger\r\n                                value=\"ai\"\r\n                                className=\"justify-start gap-3 px-4 py-3 data-[state=active]:bg-purple-500/10 data-[state=active]:text-purple-400 data-[state=active]:border-l-2 data-[state=active]:border-purple-500 rounded-none rounded-r-lg transition-all\"\r\n                            >\r\n                                <BrainCircuit size={18} />\r\n                                Yapay Zeka\r\n                            </TabsTrigger>\r\n                            <TabsTrigger\r\n                                value=\"dictionaries\"\r\n                                className=\"justify-start gap-3 px-4 py-3 data-[state=active]:bg-purple-500/10 data-[state=active]:text-purple-400 data-[state=active]:border-l-2 data-[state=active]:border-purple-500 rounded-none rounded-r-lg transition-all\"\r\n                            >\r\n                                <List size={18} />\r\n                                İşlem Tanımları\r\n                            </TabsTrigger>\r\n                            <TabsTrigger\r\n                                value=\"security\"\r\n                                className=\"justify-start gap-3 px-4 py-3 data-[state=active]:bg-purple-500/10 data-[state=active]:text-purple-400 data-[state=active]:border-l-2 data-[state=active]:border-purple-500 rounded-none rounded-r-lg transition-all\"\r\n                            >\r\n                                <Shield size={18} />\r\n                                Güvenlik\r\n                            </TabsTrigger>\r\n                        </TabsList>\r\n                    </Tabs>\r\n                </div>\r\n\r\n                {/* Right Content Area */}\r\n                <div className=\"flex-1 bg-slate-900/50 border border-slate-800 rounded-xl p-8 min-h-[600px]\">\r\n\r\n                    {/* APPEARANCE TAB */}\r\n                    {activeTab === 'appearance' && (\r\n                        <div className=\"space-y-8 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                            <div>\r\n                                <h2 className=\"text-lg font-semibold text-purple-400 mb-1\">Görünüm ve Marka</h2>\r\n                                <p className=\"text-slate-400 text-sm\">Uygulamanın ismini, logosunu ve renk temasını buradan yönetebilirsiniz.</p>\r\n                            </div>\r\n                            <Separator className=\"bg-slate-800\" />\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                                <div className=\"space-y-4\">\r\n                                    <Label className=\"text-slate-200\">Uygulama Başlığı (Sidebar)</Label>\r\n                                    <Input\r\n                                        value={config.sidebarTitle}\r\n                                        onChange={(e) => updateConfig({ sidebarTitle: e.target.value })}\r\n                                        className=\"bg-slate-950 border-slate-700\"\r\n                                        placeholder=\"Örn: Oracle CRM\"\r\n                                    />\r\n                                    <p className=\"text-xs text-slate-500\">Sol menünün en üstünde görünen marka ismi.</p>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-4\">\r\n                                    <Label className=\"text-slate-200\">Tarayıcı Başlığı (Tab Title)</Label>\r\n                                    <Input\r\n                                        value={config.appName}\r\n                                        onChange={(e) => updateConfig({ appName: e.target.value })}\r\n                                        className=\"bg-slate-950 border-slate-700\"\r\n                                        placeholder=\"Oracle CRM\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"space-y-4\">\r\n                                    <Label className=\"text-slate-200\">Logo URL</Label>\r\n                                    <Input\r\n                                        value={config.logoUrl || ''}\r\n                                        onChange={(e) => updateConfig({ logoUrl: e.target.value })}\r\n                                        className=\"bg-slate-950 border-slate-700\"\r\n                                        placeholder=\"https://...\"\r\n                                    />\r\n                                    <p className=\"text-xs text-slate-500\">Logonuzun doğrudan resim bağlantısını yapıştırın.</p>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-4\">\r\n                                    <Label className=\"text-slate-200\">Renk Teması</Label>\r\n                                    <Select\r\n                                        value={config.theme}\r\n                                        onValueChange={(val: string) => updateConfig({ theme: val as any })}\r\n                                    >\r\n                                        <SelectTrigger className=\"bg-slate-950 border-slate-700\">\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent className=\"bg-slate-900 border-slate-800\">\r\n                                            <SelectItem value=\"modern-purple\">🔮 Modern Mor (Varsayılan)</SelectItem>\r\n                                            <SelectItem value=\"ocean-blue\">🌊 Okyanus Mavisi</SelectItem>\r\n                                            <SelectItem value=\"forest-green\">🌲 Orman Yeşili</SelectItem>\r\n                                            <SelectItem value=\"sunset-orange\">🌅 Gün Batımı</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <Separator className=\"bg-slate-800\" />\r\n\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <Button\r\n                                    variant=\"destructive\"\r\n                                    className=\"bg-red-500/10 text-red-400 hover:bg-red-500/20 border border-red-500/20\"\r\n                                    onClick={resetToDefaults}\r\n                                >\r\n                                    <RotateCcw className=\"mr-2\" size={16} />\r\n                                    Varsayılana Dön\r\n                                </Button>\r\n                                {/* Changes are auto-saved in context, but we can allow explicit save for UX */}\r\n                                <Button className=\"bg-green-600 hover:bg-green-700 text-white\">\r\n                                    <Save className=\"mr-2\" size={18} />\r\n                                    Ayarları Kaydet\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* AI Tab */}\r\n                    {activeTab === 'ai' && (\r\n                        <div className=\"space-y-8 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                            <div>\r\n                                <h2 className=\"text-lg font-semibold text-purple-400 mb-1\">Yapay Zeka Konfigürasyonu</h2>\r\n                                <p className=\"text-slate-400 text-sm\">Zeyid Hocanın beynini buradan yönetebilirsin.</p>\r\n                            </div>\r\n                            <Separator className=\"bg-slate-800\" />\r\n                            {/* ... existing AI settings ... */}\r\n                            <p className=\"text-slate-500 text-sm\">Bu modül yapım aşamasındadır.</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Dictionaries Tab */}\r\n                    {activeTab === 'dictionaries' && (\r\n                        <ProcessTypesSettings />\r\n                    )}\r\n\r\n                    {/* Security Tab */}\r\n                    {activeTab === 'security' && (\r\n                        <div className=\"flex flex-col items-center justify-center h-full text-slate-500 animate-in fade-in slide-in-from-right-4\">\r\n                            <Shield size={48} className=\"mb-4 opacity-50\" />\r\n                            <p className=\"text-lg font-medium\">Bu özellik yapım aşamasında</p>\r\n                            <p className=\"text-sm\">Passkey ve Şifre yönetimi.</p>\r\n                        </div>\r\n                    )}\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\JsonImportDialog.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2899,2902],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2899,2902],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\KPICard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\Sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clsx' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":14,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"clsx"},"fix":{"range":[190,217],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { usePathname } from 'next/navigation'\r\nimport { LayoutDashboard, Users, Bell, BrainCircuit, Settings, Calendar } from 'lucide-react'\r\nimport { clsx } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\nimport { useSettings } from '@/components/providers/settings-provider'\r\n\r\nexport function Sidebar() {\r\n    const pathname = usePathname()\r\n    const { config } = useSettings()\r\n\r\n    const items = [\r\n        { label: 'Ana Sayfa', icon: LayoutDashboard, path: '/' },\r\n        { label: 'Rezervasyonlar', icon: Calendar, path: '/reservations' },\r\n        { label: 'Kayıtlar', icon: Users, path: '/leads' },\r\n        { label: 'Hatırlatmalar', icon: Bell, path: '/reminders' },\r\n        { label: 'Bakım Yap', icon: BrainCircuit, path: '/analysis' },\r\n        { label: 'Ayarlar', icon: Settings, path: '/settings' },\r\n    ]\r\n\r\n    return (\r\n        <div className=\"w-[240px] h-screen bg-slate-900/50 border-r border-slate-700 p-5 flex flex-col text-slate-100\">\r\n            <div className=\"mb-6 px-3\">\r\n                <h1 className=\"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent truncate\" title={config.sidebarTitle}>\r\n                    {config.sidebarTitle}\r\n                </h1>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n                {items.map((item) => {\r\n                    const isActive = pathname === item.path || (item.path !== '/' && pathname.startsWith(item.path))\r\n\r\n                    return (\r\n                        <Link\r\n                            key={item.path}\r\n                            href={item.path}\r\n                            className={twMerge(\r\n                                \"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 border border-transparent\",\r\n                                \"hover:bg-purple-500/10 hover:border-purple-500/20\",\r\n                                isActive && \"bg-purple-500/20 border-purple-500 text-white shadow-sm shadow-purple-500/10\"\r\n                            )}\r\n                        >\r\n                            <item.icon size={20} className={isActive ? \"text-purple-400\" : \"text-slate-400\"} />\r\n                            <span className={isActive ? \"text-purple-100 font-medium\" : \"text-slate-400\"}>\r\n                                {item.label}\r\n                            </span>\r\n                        </Link>\r\n                    )\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\providers\\settings-provider.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is assigned a value but never used.","line":50,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from \"react\"\r\nimport { supabase } from \"@/lib/supabase\"\r\n\r\ninterface UIConfig {\r\n    theme: 'modern-purple' | 'ocean-blue' | 'forest-green' | 'sunset-orange'\r\n    appName: string\r\n    sidebarTitle: string\r\n    logoUrl: string | null\r\n    isSidebarCollapsed: boolean\r\n}\r\n\r\nconst DEFAULT_CONFIG: UIConfig = {\r\n    theme: 'modern-purple',\r\n    appName: 'Oracle CRM',\r\n    sidebarTitle: 'Rezervasyon CRM',\r\n    logoUrl: null,\r\n    isSidebarCollapsed: false\r\n}\r\n\r\ninterface SettingsContextType {\r\n    config: UIConfig\r\n    isLoading: boolean\r\n    updateConfig: (updates: Partial<UIConfig>) => Promise<void>\r\n    resetToDefaults: () => Promise<void>\r\n}\r\n\r\nconst SettingsContext = createContext<SettingsContextType | undefined>(undefined)\r\n\r\nexport function SettingsProvider({ children }: { children: React.ReactNode }) {\r\n    const [config, setConfig] = useState<UIConfig>(DEFAULT_CONFIG)\r\n    const [isLoading, setIsLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        fetchSettings()\r\n    }, [])\r\n\r\n    const fetchSettings = async () => {\r\n        setIsLoading(true)\r\n        if (!('auth' in supabase)) {\r\n            // Mock mode\r\n            const saved = localStorage.getItem('ui_config')\r\n            if (saved) setConfig(JSON.parse(saved))\r\n            setIsLoading(false)\r\n            return\r\n        }\r\n\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('settings')\r\n                .select('ui_config')\r\n                .single()\r\n\r\n            if (data?.ui_config) {\r\n                setConfig({ ...DEFAULT_CONFIG, ...data.ui_config })\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching settings:', error)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const updateConfig = async (updates: Partial<UIConfig>) => {\r\n        const newConfig = { ...config, ...updates }\r\n        setConfig(newConfig) // Optimistic update\r\n\r\n        if (!('auth' in supabase)) {\r\n            localStorage.setItem('ui_config', JSON.stringify(newConfig))\r\n            return\r\n        }\r\n\r\n        try {\r\n            // First check if row exists, if not insert\r\n            const { count } = await supabase.from('settings').select('*', { count: 'exact', head: true })\r\n\r\n            if (count === 0) {\r\n                await supabase.from('settings').insert([{ ui_config: newConfig }])\r\n            } else {\r\n                // Assuming single row for global settings\r\n                // For multi-user, we'd use user_id, but here it's global app config as requested\r\n                await supabase\r\n                    .from('settings')\r\n                    .update({ ui_config: newConfig })\r\n                    .not('id', 'is', null) // Update all/first row\r\n            }\r\n        } catch (error) {\r\n            console.error('Error saving settings:', error)\r\n            // Revert on error could go here\r\n        }\r\n    }\r\n\r\n    const resetToDefaults = async () => {\r\n        setConfig(DEFAULT_CONFIG)\r\n        if ('auth' in supabase) {\r\n            await supabase\r\n                .from('settings')\r\n                .update({ ui_config: DEFAULT_CONFIG })\r\n                .not('id', 'is', null)\r\n        } else {\r\n            localStorage.removeItem('ui_config')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <SettingsContext.Provider value={{ config, isLoading, updateConfig, resetToDefaults }}>\r\n            {children}\r\n        </SettingsContext.Provider>\r\n    )\r\n}\r\n\r\nexport const useSettings = () => {\r\n    const context = useContext(SettingsContext)\r\n    if (context === undefined) {\r\n        throw new Error(\"useSettings must be used within a SettingsProvider\")\r\n    }\r\n    return context\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\settings\\ProcessTypesSettings.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3588,3591],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3588,3591],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4873,4876],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4873,4876],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":203,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8919,8922],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8919,8922],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\lib\\supabase.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":6,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":9,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1093,1096],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1093,1096],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\deniz\\.gemini\\antigravity\\scratch\\oracle-crm\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]